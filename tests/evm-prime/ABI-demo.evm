
load "exec" : { "code" : procedure((s : uintword(32)) ; (n : uintword(32)))
                            { s := 0
                            ; n := 10
                            ; jumpdest("loop-begin")
                            ; n > 0
                            ; ISZERO ; jumpi("end")
                            ; s := s + n
                            ; n := n - 1
                            ; jump("loop-begin")
                            ; jumpdest("end")
                            ; mload(s) ; push(0) ; SSTORE
                            ; .OpCodes
                            }
                       ; .OpCodes
              }

compile

check "program" : PUSH(1, 0)  ; PUSH(1, 32)  ; MSTORE
                ; PUSH(1, 10) ; PUSH(1, 0) ; MSTORE
                ; JUMPDEST
                ; PUSH(1, 0) ; PUSH(1, 0) ; MLOAD ; GT
                ; ISZERO ; PUSH(1, 43) ; JUMPI
                ; PUSH(1, 0) ; MLOAD ; PUSH(1, 32)  ; MLOAD ; ADD ; PUSH(1, 32)  ; MSTORE
                ; PUSH(1, 1)          ; PUSH(1, 0) ; MLOAD ; SUB ; PUSH(1, 0) ; MSTORE
                ; PUSH(1, 10) ; JUMP
                ; JUMPDEST
                ; PUSH(1, 32) ; MLOAD ; PUSH(1, 0) ; SSTORE
                ; .OpCodes

//failure "DESUGAR EVMPRIME EXPRESSIONS"

clear

success

.EthereumSimulation